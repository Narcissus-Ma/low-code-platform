import{R as H,r as T,s as Re}from"./DataSourceContent-fad1f524.js";import"./_commonjsHelpers-de833af9.js";import"./index-7865a97d.js";function de(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]]);return t}var Y;(function(e){e.event="event",e.props="prop"})(Y||(Y={}));function $(){}function _e(e){var a,t=void 0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return a&&n.length===a.length&&n.every(function(i,l){return i===a[l]})||(a=n,t=e.apply(void 0,n)),t}}function ee(e){return!!(e||"").match(/\d/)}function q(e){return e==null}function Ae(e){return typeof e=="number"&&isNaN(e)}function ge(e){return q(e)||Ae(e)||typeof e=="number"&&!isFinite(e)}function me(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Oe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Te(e,a,t){var n=Oe(t),r=e.search(/[1-9]/);return r=r===-1?e.length:r,e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+a)}function Be(e){var a=T.useRef(e);a.current=e;var t=T.useRef(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return a.current.apply(a,n)});return t.current}function ue(e,a){a===void 0&&(a=!0);var t=e[0]==="-",n=t&&a;e=e.replace("-","");var r=e.split("."),i=r[0],l=r[1]||"";return{beforeDecimal:i,afterDecimal:l,hasNegation:t,addNegation:n}}function Fe(e){if(!e)return e;var a=e[0]==="-";a&&(e=e.substring(1,e.length));var t=e.split("."),n=t[0].replace(/^0+/,"")||"0",r=t[1]||"";return(a?"-":"")+n+(r?"."+r:"")}function he(e,a,t){for(var n="",r=t?"0":"",i=0;i<=a-1;i++)n+=e[i]||r;return n}function fe(e,a){return Array(a+1).join(e)}function Se(e){var a=e+"",t=a[0]==="-"?"-":"";t&&(a=a.substring(1));var n=a.split(/[eE]/g),r=n[0],i=n[1];if(i=Number(i),!i)return t+r;r=r.replace(".","");var l=1+i,d=r.length;return l<0?r="0."+fe("0",Math.abs(l))+r:l>=d?r=r+fe("0",l-d):r=(r.substring(0,l)||"0")+"."+r.substring(l),t+r}function ve(e,a,t){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||t)&&a,r=ue(e),i=r.beforeDecimal,l=r.afterDecimal,d=r.hasNegation,h=parseFloat("0."+(l||"0")),b=l.length<=a?"0."+l:h.toFixed(a),x=b.split("."),m=i.split("").reverse().reduce(function(N,w,g){return N.length>g?(Number(N[0])+Number(w)).toString()+N.substring(1,N.length):w+N},x[0]),S=he(x[1]||"",a,t),p=d?"-":"",c=n?".":"";return""+p+m+c+S}function Z(e,a){if(e.value=e.value,e!==null){if(e.createTextRange){var t=e.createTextRange();return t.move("character",a),t.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(a,a),!0):(e.focus(),!1)}}var pe=_e(function(e,a){for(var t=0,n=0,r=e.length,i=a.length;e[t]===a[t]&&t<r;)t++;for(;e[r-1-n]===a[i-1-n]&&i-n>t&&r-n>t;)n++;return{from:{start:t,end:r-n},to:{start:t,end:i-n}}});function Le(e,a,t){return Math.min(Math.max(e,a),t)}function oe(e){return Math.max(e.selectionStart,e.selectionEnd)}function Me(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Pe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function je(e){var a=e.currentValue,t=e.formattedValue,n=e.currentValueIndex,r=e.formattedValueIndex;return a[n]===t[r]}function ke(e,a,t,n,r,i,l){l===void 0&&(l=je);var d=r.findIndex(function(k){return k}),h=e.slice(0,d);!a&&!t.startsWith(h)&&(a=h,t=h+t,n=n+h.length);for(var b=t.length,x=e.length,m={},S=new Array(b),p=0;p<b;p++){S[p]=-1;for(var c=0,N=x;c<N;c++){var w=l({currentValue:t,lastValue:a,formattedValue:e,currentValueIndex:p,formattedValueIndex:c});if(w&&m[c]!==!0){S[p]=c,m[c]=!0;break}}}for(var g=n;g<b&&(S[g]===-1||!i(t[g]));)g++;var B=g===b||S[g]===-1?x:S[g];for(g=n-1;g>0&&S[g]===-1;)g--;var L=g===-1||S[g]===-1?0:S[g]+1;return L>B?B:n-L<B-n?L:B}function se(e,a,t,n){var r=e.length;if(a=Le(a,0,r),n==="left"){for(;a>=0&&!t[a];)a--;a===-1&&(a=t.indexOf(!0))}else{for(;a<=r&&!t[a];)a++;a>r&&(a=t.lastIndexOf(!0))}return a===-1&&(a=r),a}function Ke(e){for(var a=Array.from({length:e.length+1}).map(function(){return!0}),t=0,n=a.length;t<n;t++)a[t]=!!(ee(e[t])||ee(e[t-1]));return a}function xe(e,a,t,n,r,i){i===void 0&&(i=$);var l=Be(function(c,N){var w,g;return ge(c)?(g="",w=""):typeof c=="number"||N?(g=typeof c=="number"?Se(c):c,w=n(g)):(g=r(c,void 0),w=n(g)),{formattedValue:w,numAsString:g}}),d=T.useState(function(){return l(q(e)?a:e,t)}),h=d[0],b=d[1],x=function(c,N){c.formattedValue!==h.formattedValue&&b({formattedValue:c.formattedValue,numAsString:c.value}),i(c,N)},m=e,S=t;q(e)&&(m=h.numAsString,S=!0);var p=l(m,S);return T.useMemo(function(){b(p)},[p.formattedValue]),[h,x]}function We(e){return e.replace(/[^0-9]/g,"")}function Ue(e){return e}function $e(e){var a=e.type;a===void 0&&(a="text");var t=e.displayType;t===void 0&&(t="input");var n=e.customInput,r=e.renderText,i=e.getInputRef,l=e.format;l===void 0&&(l=Ue);var d=e.removeFormatting;d===void 0&&(d=We);var h=e.defaultValue,b=e.valueIsNumericString,x=e.onValueChange,m=e.isAllowed,S=e.onChange;S===void 0&&(S=$);var p=e.onKeyDown;p===void 0&&(p=$);var c=e.onMouseUp;c===void 0&&(c=$);var N=e.onFocus;N===void 0&&(N=$);var w=e.onBlur;w===void 0&&(w=$);var g=e.value,B=e.getCaretBoundary;B===void 0&&(B=Ke);var L=e.isValidInputCharacter;L===void 0&&(L=ee);var k=e.isCharacterSame,M=de(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),G=xe(g,h,!!b,l,d,x),K=G[0],y=K.formattedValue,P=K.numAsString,W=G[1],j=T.useRef({formattedValue:y,numAsString:P}),z=function(o,u){j.current={formattedValue:o.formattedValue,numAsString:o.value},W(o,u)},U=T.useState(!1),J=U[0],Q=U[1],f=T.useRef(null),v=T.useRef({setCaretTimeout:null,focusTimeout:null});T.useEffect(function(){return Q(!0),function(){clearTimeout(v.current.setCaretTimeout),clearTimeout(v.current.focusTimeout)}},[]);var A=l,D=function(o,u){var s=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(s)?void 0:s}},I=function(o,u,s){o.selectionStart===0&&o.selectionEnd===o.value.length||(Z(o,u),v.current.setCaretTimeout=setTimeout(function(){o.value===s&&o.selectionStart!==o.selectionEnd&&Z(o,u)},0))},R=function(o,u,s){return se(o,u,B(o),s)},F=function(o,u,s){var C=B(u),E=ke(u,y,o,s,C,L,k);return E=se(u,E,C),E},ae=function(o){var u=o.formattedValue;u===void 0&&(u="");var s=o.input,C=o.setCaretPosition;C===void 0&&(C=!0);var E=o.source,V=o.event,_=o.numAsString,O=o.caretPos;if(s){if(O===void 0&&C){var X=o.inputValue||s.value,ie=oe(s);s.value=u,O=F(X,u,ie)}s.value=u,C&&O!==void 0&&I(s,O,u)}u!==y&&z(D(u,_),{event:V,source:E})};T.useEffect(function(){var o=j.current,u=o.formattedValue,s=o.numAsString;y!==u&&(y!==P||u!==s)&&z(D(y,P),{event:void 0,source:Y.props})},[y,P]);var ne=f.current?oe(f.current):void 0,te=typeof window<"u"?T.useLayoutEffect:T.useEffect;te(function(){var o=f.current;if(y!==j.current.formattedValue&&o){var u=F(j.current.formattedValue,y,ne);o.value=y,I(o,u,y)}},[y]);var be=function(o,u,s){var C=pe(y,o),E=Object.assign(Object.assign({},C),{lastValue:y}),V=d(o,E),_=A(V);if(V=d(_,void 0),m&&!m(D(_,V))){var O=u.target,X=oe(O),ie=F(o,y,X);return O.value=y,I(O,ie,y),!1}return ae({formattedValue:_,numAsString:V,inputValue:o,event:u,source:s,setCaretPosition:!0,input:u.target}),!0},Ve=function(o){var u=o.target,s=u.value,C=be(s,o,Y.event);C&&S(o)},Ne=function(o){var u=o.target,s=o.key,C=u.selectionStart,E=u.selectionEnd,V=u.value;V===void 0&&(V="");var _;if(s==="ArrowLeft"||s==="Backspace"?_=Math.max(C-1,0):s==="ArrowRight"?_=Math.min(C+1,V.length):s==="Delete"&&(_=C),_===void 0||C!==E){p(o);return}var O=_;if(s==="ArrowLeft"||s==="ArrowRight"){var X=s==="ArrowLeft"?"left":"right";O=R(V,_,X),O!==_&&o.preventDefault()}else s==="Delete"&&!L(V[_])?O=R(V,_,"right"):s==="Backspace"&&!L(V[_])&&(O=R(V,_,"left"));O!==_&&I(u,O,V),o.isUnitTestRun&&I(u,O,V),p(o)},we=function(o){var u=o.target,s=u.selectionStart,C=u.selectionEnd,E=u.value;if(E===void 0&&(E=""),s===C){var V=R(E,s);V!==s&&I(u,V,E)}c(o)},De=function(o){o.persist&&o.persist();var u=o.target;f.current=u,v.current.focusTimeout=setTimeout(function(){var s=u.selectionStart,C=u.selectionEnd,E=u.value;E===void 0&&(E="");var V=R(E,s);V!==s&&!(s===0&&C===E.length)&&I(u,V,E),N(o)},0)},Ie=function(o){f.current=null,clearTimeout(v.current.focusTimeout),clearTimeout(v.current.setCaretTimeout),w(o)},Ce=J&&Me()?"numeric":void 0,le=Object.assign({inputMode:Ce},M,{type:a,value:y,onChange:Ve,onKeyDown:Ne,onMouseUp:we,onFocus:De,onBlur:Ie});if(t==="text")return r?H.createElement(H.Fragment,null,r(y,M)||null):H.createElement("span",Object.assign({},M,{ref:i}),y);if(n){var Ee=n;return H.createElement(Ee,Object.assign({},le,{ref:i}))}return H.createElement("input",Object.assign({},le,{ref:i}))}function ce(e,a){var t=a.decimalScale,n=a.fixedDecimalScale,r=a.prefix;r===void 0&&(r="");var i=a.suffix;i===void 0&&(i="");var l=a.allowNegative,d=a.thousandsGroupStyle;if(d===void 0&&(d="thousand"),e===""||e==="-")return e;var h=re(a),b=h.thousandSeparator,x=h.decimalSeparator,m=t!==0&&e.indexOf(".")!==-1||t&&n,S=ue(e,l),p=S.beforeDecimal,c=S.afterDecimal,N=S.addNegation;return t!==void 0&&(c=he(c,t,!!n)),b&&(p=Te(p,b,d)),r&&(p=r+p),i&&(c=c+i),N&&(p="-"+p),e=p+(m&&x||"")+c,e}function re(e){var a=e.decimalSeparator;a===void 0&&(a=".");var t=e.thousandSeparator,n=e.allowedDecimalSeparators;return t===!0&&(t=","),n||(n=[a,"."]),{decimalSeparator:a,thousandSeparator:t,allowedDecimalSeparators:n}}function Ge(e,a){e===void 0&&(e="");var t=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),r=t.test(e),i=n.test(e);return e=e.replace(/-/g,""),r&&!i&&a&&(e="-"+e),e}function Ze(e,a){return new RegExp("(^-)|[0-9]|"+me(e),a?"g":void 0)}function ze(e,a,t){return e===""?!0:!(a!=null&&a.match(/\d/))&&!(t!=null&&t.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function He(e,a,t){var n;a===void 0&&(a=Pe(e));var r=t.allowNegative,i=t.prefix;i===void 0&&(i="");var l=t.suffix;l===void 0&&(l="");var d=t.decimalScale,h=a.from,b=a.to,x=b.start,m=b.end,S=re(t),p=S.allowedDecimalSeparators,c=S.decimalSeparator,N=e[m]===c;if(ee(e)&&(e===i||e===l)&&a.lastValue==="")return e;if(m-x===1&&p.indexOf(e[x])!==-1){var w=d===0?"":c;e=e.substring(0,x)+w+e.substring(x+1,e.length)}var g=function(v,A,D){var I=!1,R=!1;i.startsWith("-")?I=!1:v.startsWith("--")?(I=!1,R=!0):l.startsWith("-")&&v.length===l.length?I=!1:v[0]==="-"&&(I=!0);var F=I?1:0;return R&&(F=2),F&&(v=v.substring(F),A-=F,D-=F),{value:v,start:A,end:D,hasNegation:I}},B=g(e,x,m),L=B.hasNegation;n=B,e=n.value,x=n.start,m=n.end;var k=g(a.lastValue,h.start,h.end),M=k.start,G=k.end,K=k.value,y=e.substring(x,m);e.length&&K.length&&(M>K.length-l.length||G<i.length)&&!(y&&l.startsWith(y))&&(e=K);var P=0;e.startsWith(i)?P+=i.length:x<i.length&&(P=x),e=e.substring(P),m-=P;var W=e.length,j=e.length-l.length;e.endsWith(l)?W=j:(m>j||m>e.length-l.length)&&(W=m),e=e.substring(0,W),e=Ge(L?"-"+e:e,r),e=(e.match(Ze(c,!0))||[]).join("");var z=e.indexOf(c);e=e.replace(new RegExp(me(c),"g"),function(v,A){return A===z?".":""});var U=ue(e,r),J=U.beforeDecimal,Q=U.afterDecimal,f=U.addNegation;return b.end-b.start<h.end-h.start&&J===""&&N&&!parseFloat(Q)&&(e=f?"-":""),e}function qe(e,a){var t=a.prefix;t===void 0&&(t="");var n=a.suffix;n===void 0&&(n="");var r=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";r.fill(!1,0,t.length+(i?1:0));var l=e.length;return r.fill(!1,l-n.length+1,l+1),r}function Je(e){var a=re(e),t=a.thousandSeparator,n=a.decimalSeparator,r=e.prefix;r===void 0&&(r="");var i=e.allowNegative;if(i===void 0&&(i=!0),t===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Qe(e){e=Je(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var a=e.suffix,t=e.allowNegative,n=e.allowLeadingZeros,r=e.onKeyDown;r===void 0&&(r=$);var i=e.onBlur;i===void 0&&(i=$);var l=e.thousandSeparator,d=e.decimalScale,h=e.fixedDecimalScale,b=e.prefix;b===void 0&&(b="");var x=e.defaultValue,m=e.value,S=e.valueIsNumericString,p=e.onValueChange,c=de(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),N=re(e),w=N.decimalSeparator,g=N.allowedDecimalSeparators,B=function(f){return ce(f,e)},L=function(f,v){return He(f,v,e)},k=q(m)?x:m,M=S??ze(k,b,a);q(m)?q(x)||(M=M||typeof x=="number"):M=M||typeof m=="number";var G=function(f){return ge(f)?f:(typeof f=="number"&&(f=Se(f)),M&&typeof d=="number"?ve(f,d,!!h):f)},K=xe(G(m),G(x),!!M,B,L,p),y=K[0],P=y.numAsString,W=y.formattedValue,j=K[1],z=function(f){var v=f.target,A=f.key,D=v.selectionStart,I=v.selectionEnd,R=v.value;if(R===void 0&&(R=""),D!==I){r(f);return}A==="Backspace"&&R[0]==="-"&&D===b.length+1&&t&&Z(v,1),d&&h&&(A==="Backspace"&&R[D-1]===w?(Z(v,D-1),f.preventDefault()):A==="Delete"&&R[D]===w&&f.preventDefault()),g!=null&&g.includes(A)&&R[D]===w&&Z(v,D+1);var F=l===!0?",":l;A==="Backspace"&&R[D-1]===F&&Z(v,D-1),A==="Delete"&&R[D]===F&&Z(v,D+1),r(f)},U=function(f){var v=P;if(v.match(/\d/g)||(v=""),n||(v=Fe(v)),h&&d&&(v=ve(v,d,h)),v!==P){var A=ce(v,e);j({formattedValue:A,value:v,floatValue:parseFloat(v)},{event:f,source:Y.event})}i(f)},J=function(f){return f===w?!0:ee(f)},Q=function(f){var v=f.currentValue,A=f.lastValue,D=f.formattedValue,I=f.currentValueIndex,R=f.formattedValueIndex,F=v[I],ae=D[R],ne=pe(A,v),te=ne.to;return I>=te.start&&I<te.end&&g&&g.includes(F)&&ae===w?!0:F===ae};return Object.assign(Object.assign({},c),{value:W,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:Q,onValueChange:j,format:B,removeFormatting:L,getCaretBoundary:function(f){return qe(f,e)},onKeyDown:z,onBlur:U})}function Xe(e){var a=Qe(e);return H.createElement($e,Object.assign({},a))}var Ye=Re("div")({name:"NumberOverlayEditorStyle",class:"n1czszh3"});function ye(){var e,a,t;const r=(t=(a=(e=Intl.NumberFormat())==null?void 0:e.formatToParts(1.1))==null?void 0:a.find(i=>i.type==="decimal"))==null?void 0:t.value;return r??"."}function ea(){return ye()==="."?",":"."}var aa=e=>{const{value:a,onChange:t,disabled:n,highlight:r,validatedSelection:i}=e,l=T.useRef();return T.useLayoutEffect(()=>{var d;if(i!==void 0){const h=typeof i=="number"?[i,null]:i;(d=l.current)==null||d.setSelectionRange(h[0],h[1])}},[i]),T.createElement(Ye,null,T.createElement(Xe,{autoFocus:!0,getInputRef:l,className:"gdg-input",onFocus:d=>d.target.setSelectionRange(r?0:d.target.value.length,d.target.value.length),disabled:n===!0,thousandSeparator:ea(),decimalSeparator:ye(),value:Object.is(a,-0)?"-":a??"",onValueChange:t}))},ia=aa;export{ia as default};
